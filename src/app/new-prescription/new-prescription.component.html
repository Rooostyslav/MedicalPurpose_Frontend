<app-navigation></app-navigation>

<div class="container">
    <h5 class="mt-3 mb-3">Create new prescription</h5>
    <form #form="ngForm" (ngSubmit)="onSubmit()">

        <div class="form-group">
            <label for="patient">
                <h5>Patient</h5>
            </label>
            <select class="form-control col-3" name="gardenId" id="garden" [(ngModel)]="prescription.patientId" required >
                <option *ngFor="let patient of patients" value="{{patient.id}}">{{patient.fullName}}</option>
            </select>
        </div>

        <div class="form-group mt-2 mb-2">
            <label for="description" class="col-6">
                <h5>Description</h5>
                <textarea class="form-control" name="description" [(ngModel)]="prescription.description" required></textarea>
            </label>
        </div>

        <div *ngIf="prescription.medicines.length > 0" class="form-group mb-2">
            <label for="medicines">
                <h5>Medicines</h5>
            </label>
            <table class="table">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let medicine of prescription.medicines">
                        <td>{{medicine.id}}</td>
                        <td>{{medicine.name}}</td>
                        <td>{{medicine.amount}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <form #formMedicine="ngForm" (ngSubmit)="addMedicine()" class="border border-2 border-dark p-2">
            <div>
                <h6>Medicine</h6>
                <select class="form-control" name="medicineId" id="medicine" [(ngModel)]="newMedicine.id" required>
                    <option *ngFor="let medicine of medicines" value="{{medicine.id}}">{{medicine.name}}</option>
                </select>
            </div>
            <div>
                <h6>Amount</h6>
                <input class="form-control" type="number" name="amount" id="amount" [(ngModel)]="newMedicine.amount" required>
            </div>
            <button class="btn btn-primary mt-2" type="submit" [disabled]="!formMedicine.valid">Add Medicine</button>
        </form>

        <button class="btn btn-success mt-2" type="submit" [disabled]="!form.valid">Create!</button>
    </form>
</div>
